Chapter 2. 架构总览
===================

本文档介绍... 它提供了系统的设计和架构细节。

##2.1 基本概念

在描述架构之前，我们先了解一下udup的一些基本概念：

- **Job** - 用于定义用户所希望执行的作业信息，包括作业命名、类型，以及当中的任务。Job由完成同一项工作的一组Task组成。
- **Task** - Task是Udup的基本调度单元。Task由Driver执行，允许Udup灵活地支持其所支持的任务类型。任务需指定其驱动程序，驱动程序的配置。
- **Driver** – Driver代表执行数据同步任务的基本方法类型。包括MySQL，Oracle...
- **Agent** - Agent是运行任务的机器。Agent负责向Manager注册，监视任何要分配和执行任务的工作。
- **Manager** - Manager负责内部所有资源的管理调度，可以是单台或者多台组成的集群结构，它们管理所有作业和客户端，运行评估，并创建任务分配。集群结构下manager之间会相互复制数据，执行leader选举以确保高可用性。
- **Allocation** - Allocation是Job中的任务与Agent节点之间的映射。Allocation由Manager创建，作为在评估期间做出的调度决策的一部分。
- **Evaluation** - Evaluation是Udup作出调度决策的机制。当任务状态或节点状态发生变化时，Udup会创建一个新的评估，以确定是否必须采取任何措施。如有必要，评估可能会导致更改分配。
- **Scheduler** - Scheduler负责将定义好的的任务调度提交到计划队列中
- **Plan** - 

##2.2 架构设计
本节介绍系统的整体架构

下面简要介绍上图所示组件
##2.3 调度模型
Udup调度采用共享状态式集群调度架构，​这种架构下集群状态多副本会被应用层次调度器独立更新。一旦本地有更新，调度器发布一个并发更新所有共享集群状态。

**功能**
- 1：基于serf+raft的分布任务调度架构
- 2：确保每个任务在集群中不同节点上不重复的执行。
- 3：单个任务节点故障时自动转移到其他任务节点继续执行。
- 4：支持动态添加和删除任务。

##2.4 数据传输

